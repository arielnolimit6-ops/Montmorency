const a64_0x5532b2=a64_0x52ab;(function(_0x30084e,_0x4be8e0){const _0x43a785=a64_0x52ab,_0x3c9213=_0x30084e();while(!![]){try{const _0x58f61d=parseInt(_0x43a785(0x145))/0x1+-parseInt(_0x43a785(0x160))/0x2+-parseInt(_0x43a785(0x157))/0x3*(-parseInt(_0x43a785(0x170))/0x4)+parseInt(_0x43a785(0x146))/0x5+parseInt(_0x43a785(0x14d))/0x6*(-parseInt(_0x43a785(0x154))/0x7)+-parseInt(_0x43a785(0x14f))/0x8*(-parseInt(_0x43a785(0x148))/0x9)+parseInt(_0x43a785(0x13b))/0xa*(-parseInt(_0x43a785(0x156))/0xb);if(_0x58f61d===_0x4be8e0)break;else _0x3c9213['push'](_0x3c9213['shift']());}catch(_0x4fb911){_0x3c9213['push'](_0x3c9213['shift']());}}}(a64_0x3724,0x6691f));const a64_0x1cba7e=(function(){const _0x3de63d=a64_0x52ab,_0xdf5a0d={'ReXgp':_0x3de63d(0x131)};let _0x494ec1=!![];return function(_0x467506,_0x3a18a2){const _0x11ad4c=_0x3de63d,_0x370efe={'EcZks':function(_0x188279,_0x254d93){return _0x188279===_0x254d93;}};if('TzoBH'!==_0xdf5a0d['ReXgp']){const _0x51ec50=_0x494ec1?function(){const _0x35d357=a64_0x52ab;if(_0x3a18a2){if(_0x370efe[_0x35d357(0x13c)](_0x35d357(0x169),'krxVz'))return _0x515ce8(_0x35d357(0x139));else{const _0x29cd53=_0x3a18a2['apply'](_0x467506,arguments);return _0x3a18a2=null,_0x29cd53;}}}:function(){};return _0x494ec1=![],_0x51ec50;}else{if(_0x263cb5){const _0x383507=_0x26b44b[_0x11ad4c(0x132)](_0x2aaf5d,arguments);return _0x4afd53=null,_0x383507;}}};}()),a64_0x2b9985=a64_0x1cba7e(this,function(){const _0x1daa43=a64_0x52ab,_0x40bcb6={'EyfEP':_0x1daa43(0x173)};return a64_0x2b9985[_0x1daa43(0x171)]()['search'](_0x40bcb6[_0x1daa43(0x15d)])[_0x1daa43(0x171)]()['constructor'](a64_0x2b9985)['search']('(((.+)+)+)+$');});a64_0x2b9985();function a64_0x52ab(_0x1c455e,_0x451ced){const _0x1dcccf=a64_0x3724();return a64_0x52ab=function(_0x2b9985,_0x1cba7e){_0x2b9985=_0x2b9985-0x126;let _0x3724f3=_0x1dcccf[_0x2b9985];if(a64_0x52ab['BaEjIa']===undefined){var _0x52abb1=function(_0x3a8b9a){const _0x28ea39='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x28705a='',_0x466246='',_0x57ec2c=_0x28705a+_0x52abb1;for(let _0x58aebc=0x0,_0x5be9c3,_0x27e723,_0x45b318=0x0;_0x27e723=_0x3a8b9a['charAt'](_0x45b318++);~_0x27e723&&(_0x5be9c3=_0x58aebc%0x4?_0x5be9c3*0x40+_0x27e723:_0x27e723,_0x58aebc++%0x4)?_0x28705a+=_0x57ec2c['charCodeAt'](_0x45b318+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5be9c3>>(-0x2*_0x58aebc&0x6)):_0x58aebc:0x0){_0x27e723=_0x28ea39['indexOf'](_0x27e723);}for(let _0x170077=0x0,_0x4fb69d=_0x28705a['length'];_0x170077<_0x4fb69d;_0x170077++){_0x466246+='%'+('00'+_0x28705a['charCodeAt'](_0x170077)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x466246);};a64_0x52ab['GdRCib']=_0x52abb1,_0x1c455e=arguments,a64_0x52ab['BaEjIa']=!![];}const _0x2fc799=_0x1dcccf[0x0],_0x2e3bad=_0x2b9985+_0x2fc799,_0x78b011=_0x1c455e[_0x2e3bad];if(!_0x78b011){const _0x443517=function(_0xdf2021){this['KsUmTK']=_0xdf2021,this['FutuYc']=[0x1,0x0,0x0],this['Ouflai']=function(){return'newState';},this['gNfZPD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['LkFMFa']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x443517['prototype']['tqjBZE']=function(){const _0x21477c=new RegExp(this['gNfZPD']+this['LkFMFa']),_0x3643bc=_0x21477c['test'](this['Ouflai']['toString']())?--this['FutuYc'][0x1]:--this['FutuYc'][0x0];return this['tjPCxP'](_0x3643bc);},_0x443517['prototype']['tjPCxP']=function(_0x55bb97){if(!Boolean(~_0x55bb97))return _0x55bb97;return this['AdyXVS'](this['KsUmTK']);},_0x443517['prototype']['AdyXVS']=function(_0x1a0d91){for(let _0x1b227e=0x0,_0x5b759c=this['FutuYc']['length'];_0x1b227e<_0x5b759c;_0x1b227e++){this['FutuYc']['push'](Math['round'](Math['random']())),_0x5b759c=this['FutuYc']['length'];}return _0x1a0d91(this['FutuYc'][0x0]);},new _0x443517(a64_0x52ab)['tqjBZE'](),_0x3724f3=a64_0x52ab['GdRCib'](_0x3724f3),_0x1c455e[_0x2e3bad]=_0x3724f3;}else _0x3724f3=_0x78b011;return _0x3724f3;},a64_0x52ab(_0x1c455e,_0x451ced);}function a64_0x3724(){const _0x190e79=['D2fYBG','zgLZywjSzwq','n0fVwKDLua','CvnozNO','nJCYnJK0zKfXtMfJ','mJq1nZG2mxjozw1zAq','C3rHCNrZv2L0Aa','rxjYB3iGDxbKyxrPBMCGAMLKia','zxHWB3j0CW','CMvTB3zL','C3bSAxq','rxLMrva','qunusu9ouW','z2v0','ntKYntu0zvfZteLP','tfzQz04','ywn0Aw9UlW','u1rbvevt','AM9PBG','x2LUAxq','rxjYB3iGy2HLy2TPBMCGzw5HyMXLzcbZDgf0zsbMB3iGAMLKia','weDyCwK','zMLUzej5ugS','y0vAENa','Dg9mB3DLCKnHC2u','B3vszuO','DMfSDwvZ','D2TxENq','ig4Nzxn0ihbHCYb2ywXPzguUieXLCYbHy3rPB25ZihzHBgLKzxmGC29UDdOG','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','nhz5quXLCW','Dg9tDhjPBMC','CMv0AxjLCG','kcGOlISPkYKRksSK','Cwz4tMW','igvZDcbKzwPHigrLC2fJDgL2zq','zgvSzxrL','DhjPBq','s2jOtuO','ywn0Aw9U','tcDHy3rPB24GzguG','zw5HyMXLzezVCKPPza','z2v0qwn0Aw9UrM9YsMLK','cVcFM6dVUi8GkKnVBMzPz3vYyxrPB24GzguG','vfjYA3y','wM1YuNy','DxbZzxj0','r1Lyqvi','yxbWBhK','u1rssu5h','kGOk4OcIicO','igvZDcbTywLUDgvUyw50ia','Aw5JBhvKzxm','kIdINQhVUi8Gx3bVDxiGywn0AxzLCIbSysbMB25JDgLVBL8G4PYfcUkaOIaQ','zxrHDa','q2v0DguGy29TBwfUzguGzxn0ihjLC2vYDMvYihvUAxf1zw1LBNqGCg91CIbSzxmGz3jVDxbLCW','zw5HyMXLza','mtuWr2HQy2Pu','rwnAA3m','vgXoEfq','DgTrt0q','C2vXDwvSAxPL','BvPfzgi','C3LUyW','C3vWCa','DMvjtKu','CvP5z0C','mJi0mtmWtxDZtwTt','mZq1ntK5merzDKf6uG','kIdINQhVUi8Gx0fJDgLVBIa6xYdIMQdVUi8Gu3vWChjPBwvYcUkaOIaQ','mZaXnu9JAw5iwq','C2v0','vfjywuS','ihDPDgGGywn0Aw9Uia','igvZDcbKzwPHigfJDgLM','mtG3otC0nKLgBvHWta','igfJDgLVBI8','nta3mKDUAev1Ea','zxjYB3i','C0vuBfa'];a64_0x3724=function(){return _0x190e79;};return a64_0x3724();}const NodeCache=require('node-cache'),{DB}=require('../../bdd/_index'),{zokou}=require('../zokou'),{DataTypes,Model}=require(a64_0x5532b2(0x13f));class EventStateManager{#tableName;#db=null;['_init']=null;[a64_0x5532b2(0x163)]={'enabled':'oui','disabled':'non'};[a64_0x5532b2(0x15e)]={'remove':a64_0x5532b2(0x172),'delete':a64_0x5532b2(0x142),'warn':a64_0x5532b2(0x152)};#defaultAction=this[a64_0x5532b2(0x15e)][a64_0x5532b2(0x15b)];#defaultState=this['STATES']['disabled'];#cache;constructor(_0x2623aa,_0x3cf499=new NodeCache()){const _0x56b863=a64_0x5532b2;this.#tableName=_0x2623aa,this.#cache=_0x3cf499,this[_0x56b863(0x165)]=this.#createTable();}async #createTable(){const _0x1a44ce=a64_0x5532b2;this.#db=DB['define'](this.#tableName,{'jid':{'type':DataTypes[_0x1a44ce(0x133)],'primaryKey':!![]},'etat':{'type':DataTypes[_0x1a44ce(0x133)],'defaultValue':this.#defaultState},'action':{'type':DataTypes['STRING'],'defaultValue':this.#defaultAction}}),await this.#db[_0x1a44ce(0x141)]();}async #addOrUpdateJid(_0x5f17bc,_0x1bae73=this.#defaultState){const _0x4fe5a5=a64_0x5532b2;await this[_0x4fe5a5(0x165)],await this.#db[_0x4fe5a5(0x130)]({'jid':_0x5f17bc,'etat':_0x1bae73});const _0x4e6963=this.#cache[_0x4fe5a5(0x15f)](_0x5f17bc)||{};this.#cache[_0x4fe5a5(0x149)](_0x5f17bc,{..._0x4e6963,'etat':_0x1bae73});}async #updateJidAction(_0x5a8ae8,_0x112f52=this.#defaultAction){const _0x5f0864=a64_0x5532b2;try{await this['_init'],await this.#db[_0x5f0864(0x130)]({'jid':_0x5a8ae8,'action':_0x112f52});const _0x512512=this.#cache[_0x5f0864(0x15f)](_0x5a8ae8)||{};this.#cache[_0x5f0864(0x149)](_0x5a8ae8,{..._0x512512,'action':_0x112f52});}catch(_0x13f18e){console[_0x5f0864(0x150)](_0x5f0864(0x159)+_0x5a8ae8+_0x5f0864(0x14b)+_0x112f52+':',_0x13f18e);throw _0x13f18e;}}async['enabledForJid'](_0x211a3a){const _0x584864=a64_0x5532b2,_0x2c5afb={'tkQOD':function(_0x3afddc,_0x8fefad){return _0x3afddc!==_0x8fefad;}};try{const _0x9bc03a=this.#cache[_0x584864(0x15f)](_0x211a3a);if(_0x9bc03a?.[_0x584864(0x138)]!==undefined)return _0x2c5afb[_0x584864(0x13e)](_0x9bc03a['etat'],this.#defaultState);await this['_init'];const _0x57eae4=await this.#db[_0x584864(0x168)](_0x211a3a);if(_0x57eae4){const _0x4b7b93=_0x57eae4['get']({'plain':!![]});return this.#cache[_0x584864(0x149)](_0x211a3a,{...this.#cache['get'](_0x211a3a)||{},'etat':_0x4b7b93[_0x584864(0x138)]}),_0x2c5afb[_0x584864(0x13e)](_0x4b7b93['etat'],this.#defaultState);}return![];}catch(_0x5404f9){return console[_0x584864(0x150)](_0x584864(0x166)+_0x211a3a+':',_0x5404f9),![];}}async[a64_0x5532b2(0x12c)](_0x59f207){const _0x36c57b=a64_0x5532b2,_0x12582c={'vNodZ':function(_0x12db8e,_0x1f5a5f){return _0x12db8e===_0x1f5a5f;},'qfxNl':_0x36c57b(0x143),'TRXYK':'JWmxX'};try{if(_0x12582c['vNodZ'](_0x12582c[_0x36c57b(0x174)],_0x12582c['qfxNl'])){const _0x59f806=this.#cache[_0x36c57b(0x15f)](_0x59f207);if(_0x59f806?.[_0x36c57b(0x129)])return _0x59f806['action'];await this['_init'];const _0x3d6c9a=await this.#db[_0x36c57b(0x168)](_0x59f207);if(_0x3d6c9a){if('UEUqD'!==_0x12582c[_0x36c57b(0x14a)]){const _0x288529=_0x3d6c9a[_0x36c57b(0x15f)]({'plain':!![]});return this.#cache[_0x36c57b(0x149)](_0x59f207,{...this.#cache[_0x36c57b(0x15f)](_0x59f207)||{},'action':_0x288529['action']}),_0x288529['action'];}else return _0x27507f(_0x3fca66+_0x36c57b(0x14c));}return this.#defaultAction;}else{const _0x1bde59=_0x170077?function(){const _0x38b793=_0x36c57b;if(_0x55bb97){const _0x4d0dc8=_0x320f49[_0x38b793(0x132)](_0x103c1e,arguments);return _0x35c85b=null,_0x4d0dc8;}}:function(){};return _0x3643bc=![],_0x1bde59;}}catch(_0x2068e9){console[_0x36c57b(0x150)](_0x36c57b(0x16f)+_0x59f207+':',_0x2068e9);throw _0x2068e9;}}['generateCmd'](_0x52ae1f){const _0x390ae8=a64_0x5532b2,_0xc47fad={'qZygG':function(_0xaa386c,_0x2b3fa5){return _0xaa386c(_0x2b3fa5);},'ouReJ':function(_0x39068d,_0xffa27a){return _0x39068d&&_0xffa27a;},'jOdtX':'WQsjT','KbhMJ':'Vous\x20n\x27avez\x20pas\x20les\x20permissions\x20necessaires','ZmrRv':function(_0x3ee314,_0x1b605d){return _0x3ee314==_0x1b605d;},'TlNxT':function(_0x4f876d,_0x1534d3){return _0x4f876d(_0x1534d3);},'XGXqi':function(_0x4388a1,_0x72ef45){return _0x4388a1==_0x72ef45;},'wkWzt':function(_0x50fefd,_0x2102b4){return _0x50fefd(_0x2102b4);},'dgWKQ':_0x390ae8(0x162),'CoyDp':function(_0x563689,_0x313213){return _0x563689(_0x313213);},'sETlP':function(_0x4b03f5,_0x5984a7){return _0x4b03f5(_0x5984a7);},'oqipw':function(_0x52a040,_0x2d8bc5){return _0x52a040!==_0x2d8bc5;},'TRrkv':'BjGrs'},{nomCom:_0x28943f}=_0x52ae1f;zokou({..._0x52ae1f},async(_0xc90b4b,_0x18ab1e,_0x31fb24)=>{const _0x46ac29=_0x390ae8,_0xdff10f={'LVjgN':_0x46ac29(0x173)};if(_0x46ac29(0x140)!=='mZEdb')return _0x27c851('L\x27action\x20'+_0x1f7df4+_0x46ac29(0x16e)+_0x5d2306['values'](this['ACTIONS'])[_0x46ac29(0x164)](',\x20'));else{const {verifGroupe:_0x99049a,verifAdmin:_0x15d006,ms:_0x1af448,arg:_0x16ee37,superUser:_0x5ce930,repondre:_0x5e4f79}=_0x31fb24;if(!_0x99049a)return _0xc47fad[_0x46ac29(0x144)](_0x5e4f79,'Cette\x20commande\x20est\x20reserver\x20uniquement\x20pour\x20les\x20groupes');if(_0xc47fad[_0x46ac29(0x16b)](!_0x5ce930,!_0x15d006)){if(_0xc47fad['jOdtX']!=='RvaUF')return _0x5e4f79(_0xc47fad[_0x46ac29(0x128)]);else{_0x3551cc['error']('Error\x20getting\x20action\x20for\x20jid\x20'+_0x111d23+':',_0x359fc3);throw _0x5e796c;}}try{const _0x4e474e=_0x46ac29(0x12d)+_0x28943f+_0x46ac29(0x134)+_0x28943f+'\x20'+this[_0x46ac29(0x163)][_0x46ac29(0x13a)]+_0x46ac29(0x137)+_0x28943f+'\x20'+this['STATES'][_0x46ac29(0x153)]+'*\x20‚û°Ô∏è\x20_pour\x20la\x20d√©sactiver_\x20‚ùå\x0a\x0a‚öôÔ∏è\x20*Changer\x20l\x27action*\x20:\x0a‚Ä¢\x20*'+_0x28943f+_0x46ac29(0x14e)+this['ACTIONS']['remove']+'*\x20‚û°Ô∏è\x20_Action\x20:_\x20üóëÔ∏è\x20Retirer\x0a‚Ä¢\x20*'+_0x28943f+'\x20action/'+this[_0x46ac29(0x15e)][_0x46ac29(0x126)]+_0x46ac29(0x147)+_0x28943f+'\x20action/'+this['ACTIONS']['warn']+'*\x20‚û°Ô∏è\x20_Action\x20:_\x20üîî\x20Avertir';if(!_0x16ee37||!_0x16ee37[0x0]||_0xc47fad[_0x46ac29(0x12f)](_0x16ee37[_0x46ac29(0x164)]('')['trim'](),''))return _0xc47fad['TlNxT'](_0x5e4f79,_0x4e474e);const _0x4a41a9=_0x16ee37[0x0][_0x46ac29(0x16a)]();if(_0xc47fad[_0x46ac29(0x167)](_0x4a41a9,this[_0x46ac29(0x163)][_0x46ac29(0x13a)])){if(await this[_0x46ac29(0x12b)](_0xc90b4b))return _0xc47fad['TlNxT'](_0x5e4f79,_0x28943f+_0x46ac29(0x14c));return await this.#addOrUpdateJid(_0xc90b4b,_0x4a41a9),_0xc47fad[_0x46ac29(0x13d)](_0x5e4f79,_0x28943f+'\x20est\x20maintenant\x20actif');}else{if(_0x4a41a9==this[_0x46ac29(0x163)][_0x46ac29(0x153)]){if(!await this[_0x46ac29(0x12b)](_0xc90b4b))return _0xc47fad[_0x46ac29(0x13d)](_0x5e4f79,_0x28943f+_0x46ac29(0x175));return await this.#addOrUpdateJid(_0xc90b4b,_0x4a41a9),_0xc47fad[_0x46ac29(0x16d)](_0x5e4f79,_0x28943f+'\x20est\x20maintenant\x20desactive');}else{if(_0x4a41a9[_0x46ac29(0x158)](_0xc47fad['dgWKQ'])){const _0x1f4c05=_0x4a41a9[_0x46ac29(0x15c)]('/')[0x1][_0x46ac29(0x127)]()['toLowerCase']();if(!Object[_0x46ac29(0x16c)](this['ACTIONS'])[_0x46ac29(0x136)](_0x1f4c05))return _0xc47fad['CoyDp'](_0x5e4f79,'L\x27action\x20'+_0x1f4c05+_0x46ac29(0x16e)+Object['values'](this[_0x46ac29(0x15e)])[_0x46ac29(0x164)](',\x20'));return await this.#updateJidAction(_0xc90b4b,_0x1f4c05),_0xc47fad[_0x46ac29(0x151)](_0x5e4f79,_0x46ac29(0x12a)+_0x28943f+_0x46ac29(0x135)+_0x1f4c05);}else return _0xc47fad['CoyDp'](_0x5e4f79,_0x4e474e);}}}catch(_0x288ed4){return _0xc47fad['oqipw'](_0xc47fad[_0x46ac29(0x12e)],_0x46ac29(0x155))?(console['log']('Error\x20setting\x20'+_0x28943f+'\x20for\x20jid\x20'+_0xc90b4b+':\x20'+_0x288ed4),_0x5e4f79('Une\x20erreur\x20est\x20survenue\x20,\x20veillez\x20nous\x20en\x20informez\x20sur\x20le\x20forum\x20si\x20percistant')):_0x351b67['toString']()['search'](uZSSRe[_0x46ac29(0x161)])['toString']()['constructor'](_0xb6c782)['search'](uZSSRe[_0x46ac29(0x161)]);}}});}}module[a64_0x5532b2(0x15a)]=EventStateManager;